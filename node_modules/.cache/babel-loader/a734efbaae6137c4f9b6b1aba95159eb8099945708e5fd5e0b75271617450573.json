{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ContactForm=()=>{const[form,setForm]=useState({name:'',email:'',subject:'',message:'',consent:false});const[errors,setErrors]=useState({});const[submitStatus,setSubmitStatus]=useState('');const draftKey='contactFormDraft';// Load saved draft\nuseEffect(()=>{const saved=localStorage.getItem(draftKey);if(saved){setForm(JSON.parse(saved));}},[]);// Save draft on form change\nuseEffect(()=>{localStorage.setItem(draftKey,JSON.stringify(form));},[form]);const sanitize={name:val=>/^[A-Za-zÀ-ÿ\\s'-]+$/.test(val),email:val=>/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(val),subject:val=>/^[A-Za-z\\s]+$/.test(val),message:val=>!/[<>]/.test(val)};const handleChange=e=>{const{name,value,type,checked}=e.target;setForm(prev=>({...prev,[name]:type==='checkbox'?checked:value}));};const validate=()=>{const newErrors={};if(!sanitize.name(form.name))newErrors.name='Invalid name';if(!sanitize.email(form.email))newErrors.email='Invalid email';if(!sanitize.subject(form.subject))newErrors.subject='Subject must be letters only';if(!sanitize.message(form.message))newErrors.message='Message contains invalid characters';if(!form.consent)newErrors.consent='You must agree to be contacted';return newErrors;};const handleSubmit=async e=>{e.preventDefault();const validationErrors=validate();setErrors(validationErrors);if(Object.keys(validationErrors).length===0){try{const response=await fetch('http://localhost:3001/messages',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(form)});if(!response.ok)throw new Error('Submission failed');localStorage.removeItem(draftKey);setForm({name:'',email:'',subject:'',message:'',consent:false});setSubmitStatus('Message sent successfully!');}catch(err){setSubmitStatus('Error sending message. Try again later.');console.error(err);}}else{setSubmitStatus('');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Contact Me\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,noValidate:true,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:form.name,onChange:handleChange,className:\"form-control\"}),errors.name&&/*#__PURE__*/_jsx(\"div\",{className:\"text-danger\",children:errors.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:form.email,onChange:handleChange,className:\"form-control\"}),errors.email&&/*#__PURE__*/_jsx(\"div\",{className:\"text-danger\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Subject\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"subject\",value:form.subject,onChange:handleChange,className:\"form-control\"}),errors.subject&&/*#__PURE__*/_jsx(\"div\",{className:\"text-danger\",children:errors.subject})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Message\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"message\",value:form.message,onChange:handleChange,className:\"form-control\"}),errors.message&&/*#__PURE__*/_jsx(\"div\",{className:\"text-danger\",children:errors.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-check mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"consent\",checked:form.consent,onChange:handleChange,className:\"form-check-input\"}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",children:\"I agree to be contacted and understand my info will be stored securely.\"}),errors.consent&&/*#__PURE__*/_jsx(\"div\",{className:\"text-danger\",children:errors.consent})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Send\"}),submitStatus&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:submitStatus})]})]});};export default ContactForm;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","ContactForm","form","setForm","name","email","subject","message","consent","errors","setErrors","submitStatus","setSubmitStatus","draftKey","saved","localStorage","getItem","JSON","parse","setItem","stringify","sanitize","val","test","handleChange","e","value","type","checked","target","prev","validate","newErrors","handleSubmit","preventDefault","validationErrors","Object","keys","length","response","fetch","method","headers","body","ok","Error","removeItem","err","console","error","className","children","onSubmit","noValidate","onChange"],"sources":["/Users/elladoane/CSCI3172/lab8-clean/src/components/ContactForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nconst ContactForm = () => {\n    const [form, setForm] = useState({\n        name: '',\n        email: '',\n        subject: '',\n        message: '',\n        consent: false,\n    });\n\n    const [errors, setErrors] = useState({});\n    const [submitStatus, setSubmitStatus] = useState('');\n\n    const draftKey = 'contactFormDraft';\n\n    // Load saved draft\n    useEffect(() => {\n        const saved = localStorage.getItem(draftKey);\n        if (saved) {\n            setForm(JSON.parse(saved));\n        }\n    }, []);\n\n    // Save draft on form change\n    useEffect(() => {\n        localStorage.setItem(draftKey, JSON.stringify(form));\n    }, [form]);\n\n    const sanitize = {\n        name: (val) => /^[A-Za-zÀ-ÿ\\s'-]+$/.test(val),\n        email: (val) => /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(val),\n        subject: (val) => /^[A-Za-z\\s]+$/.test(val),\n        message: (val) => !/[<>]/.test(val),\n    };\n\n    const handleChange = (e) => {\n        const { name, value, type, checked } = e.target;\n        setForm((prev) => ({\n            ...prev,\n            [name]: type === 'checkbox' ? checked : value,\n        }));\n    };\n\n    const validate = () => {\n        const newErrors = {};\n        if (!sanitize.name(form.name)) newErrors.name = 'Invalid name';\n        if (!sanitize.email(form.email)) newErrors.email = 'Invalid email';\n        if (!sanitize.subject(form.subject)) newErrors.subject = 'Subject must be letters only';\n        if (!sanitize.message(form.message)) newErrors.message = 'Message contains invalid characters';\n        if (!form.consent) newErrors.consent = 'You must agree to be contacted';\n        return newErrors;\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        const validationErrors = validate();\n        setErrors(validationErrors);\n\n        if (Object.keys(validationErrors).length === 0) {\n            try {\n                const response = await fetch('http://localhost:3001/messages', {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify(form),\n                });\n\n                if (!response.ok) throw new Error('Submission failed');\n\n                localStorage.removeItem(draftKey);\n                setForm({ name: '', email: '', subject: '', message: '', consent: false });\n                setSubmitStatus('Message sent successfully!');\n            } catch (err) {\n                setSubmitStatus('Error sending message. Try again later.');\n                console.error(err);\n            }\n        } else {\n            setSubmitStatus('');\n        }\n    };\n\n    return (\n        <div className=\"container mt-4\">\n            <h2>Contact Me</h2>\n            <form onSubmit={handleSubmit} noValidate>\n                <div className=\"mb-3\">\n                    <label className=\"form-label\">Name</label>\n                    <input type=\"text\" name=\"name\" value={form.name} onChange={handleChange} className=\"form-control\" />\n                    {errors.name && <div className=\"text-danger\">{errors.name}</div>}\n                </div>\n\n                <div className=\"mb-3\">\n                    <label className=\"form-label\">Email</label>\n                    <input type=\"email\" name=\"email\" value={form.email} onChange={handleChange} className=\"form-control\" />\n                    {errors.email && <div className=\"text-danger\">{errors.email}</div>}\n                </div>\n\n                <div className=\"mb-3\">\n                    <label className=\"form-label\">Subject</label>\n                    <input type=\"text\" name=\"subject\" value={form.subject} onChange={handleChange} className=\"form-control\" />\n                    {errors.subject && <div className=\"text-danger\">{errors.subject}</div>}\n                </div>\n\n                <div className=\"mb-3\">\n                    <label className=\"form-label\">Message</label>\n                    <textarea name=\"message\" value={form.message} onChange={handleChange} className=\"form-control\" />\n                    {errors.message && <div className=\"text-danger\">{errors.message}</div>}\n                </div>\n\n                <div className=\"form-check mb-3\">\n                    <input type=\"checkbox\" name=\"consent\" checked={form.consent} onChange={handleChange} className=\"form-check-input\" />\n                    <label className=\"form-check-label\">\n                        I agree to be contacted and understand my info will be stored securely.\n                    </label>\n                    {errors.consent && <div className=\"text-danger\">{errors.consent}</div>}\n                </div>\n\n                <button type=\"submit\" className=\"btn btn-primary\">Send</button>\n                {submitStatus && <div className=\"mt-3\">{submitStatus}</div>}\n            </form>\n        </div>\n    );\n};\n\nexport default ContactForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}